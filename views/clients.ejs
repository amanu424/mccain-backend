<!DOCTYPE HTML>
<html class="js no-applicationcache geolocation history postmessage svg websockets localstorage sessionstorage no-websqldatabase webworkers hashchange audio canvas canvastext webgl video cssgradients opacity multiplebgs rgba inlinesvg hsla supports svgclippaths smil generatedcontent fontface textshadow cssanimations borderimage backgroundsize boxshadow borderradius csscolumns csscolumns-width csscolumns-span csscolumns-fill csscolumns-gap csscolumns-rule csscolumns-rulecolor csscolumns-rulestyle csscolumns-rulewidth csscolumns-breakbefore csscolumns-breakafter csscolumns-breakinside flexbox cssreflections csstransforms csstransitions csstransforms3d indexeddb indexeddb-deletedatabase" lang="en"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" href="cid:css-2d539af2-f536-4353-8c80-2d621137246b@mhtml.blink" /><link rel="stylesheet" type="text/css" href="cid:css-f12d1deb-b135-470d-ac09-8d1e03949de2@mhtml.blink" />
  

    <link rel="preload" as="script" href="https://www.bhp.com/resources/29d9fd4824aa6cb95a2f362ceff5bc04e1f00121e11b8"><link rel="preload" href="https://www.bhp.com/-/media/themes/bhp1ip/bhp1ip-en/bhp1ip-en/fonts/graphik/graphik-regular-web-ttf.ttf" as="font" crossorigin="anonymous">
    <link rel="preload" href="https://www.bhp.com/-/media/themes/bhp1ip/bhp1ip-en/bhp1ip-en/fonts/graphik/graphik-bold-web-ttf.ttf" as="font" crossorigin="anonymous">
    <link rel="preload" href="https://www.bhp.com/-/media/themes/bhp1ip/bhp1ip-en/bhp1ip-en/fonts/graphik/graphik-semibold-web-ttf.tff" as="font" crossorigin="anonymous">
    <link href="https://www.bhp.com/-/media/base-themes/main-theme/styles/font.css" rel="stylesheet">
<link href="https://www.bhp.com/-/media/feature/experience-accelerator/bootstrap-4/bootstrap-4/styles/optimized-min.css?t=20210830T130621Z" rel="stylesheet"><link href="https://www.bhp.com/-/media/base-themes/core-libraries/styles/optimized-min.css?t=20210830T130624Z" rel="stylesheet"><link href="https://www.bhp.com/-/media/base-themes/main-theme/styles/optimized-min.css?t=20210921T081102Z" rel="stylesheet"><link href="https://www.bhp.com/-/media/themes/bhp1ip/bhp1ip-en/bhp1ip-en/styles/optimized-min.css?t=20240729T163237Z" rel="stylesheet">

    
    



    <title>Our products help build a better, clearer future | BHP</title>


<link rel="canonical" href="https://www.bhp.com/">







<meta property="og:title" content="Our products help build a better, clearer future | BHP"><meta property="og:url" content="https://www.bhp.com/">







<meta property="twitter:title" content="Our products help build a better, clearer future | BHP"><meta property="twitter:card" content="summary_large_image">

    <meta name="viewport" content="width=device-width, initial-scale=1">

 <link rel="apple-touch-icon" sizes="57x57" href="https://www.bhp.com/-/media/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://www.bhp.com/-/media/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://www.bhp.com/-/media/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://www.bhp.com/-/media/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://www.bhp.com/-/media/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://www.bhp.com/-/media/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://www.bhp.com/-/media/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://www.bhp.com/-/media/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://www.bhp.com/-/media/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="36x36" href="https://www.bhp.com/-/media/favicons/android-icon-36X36.png">
<link rel="icon" type="image/png" sizes="48x48" href="https://www.bhp.com/-/media/favicons/android-icon-48x48.png">
<link rel="icon" type="image/png" sizes="72x72" href="https://www.bhp.com/-/media/favicons/android-icon-72x72.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://www.bhp.com/-/media/favicons/android-icon-96x96.png">
<link rel="icon" type="image/png" sizes="144x144" href="https://www.bhp.com/-/media/favicons/android-icon-144x144.png">
<link rel="icon" type="image/png" sizes="192x192" href="https://www.bhp.com/-/media/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.bhp.com/-/media/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://www.bhp.com/-/media/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.bhp.com/-/media/favicons/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="70x70" href="https://www.bhp.com/-/media/favicons/ms-icon-70x70.png">
<link rel="icon" type="image/png" sizes="144x144" href="https://www.bhp.com/-/media/favicons/ms-icon-144x144.png">
<link rel="icon" type="image/png" sizes="150x150" href="https://www.bhp.com/-/media/favicons/ms-icon-150x150.png">
<link rel="icon" type="image/png" sizes="310x310" href="https://www.bhp.com/-/media/favicons/ms-icon-310x310.png">
<link href="https://www.bhp.com/-/media/project/bhp1ip/staticsite/blank-site.css" rel="stylesheet">



    <!-- Google Tag Manager -->

<!-- End Google Tag Manager -->



                              <link href="https://s.go-mpulse.net/boomerang/8F7H2-3W3S5-7JD98-PV4YM-8U6EL" rel="preload" as="script">




 <link rel="canonical" href="https://www.mccain.com/" />
        <title>McCain Foods Global Corporate Website | McCain.com</title>
        <meta name="description" content="McCain Foods | Our purpose - 'Celebrating real connections through delicious, planet-friendly food'. We supply delicious frozen French fries, potato specialties, and appetizers to retail and foodservice customers around the globe." />
        <meta name="keywords" content="McCain Foods; French fries; Food; Frozen food; Careers">
        <meta property="og:type" content="website"/>
        <meta property="og:title" content="McCain Foods Global Corporate Website | McCain.com">
        <meta property="og:image" content="http://www.mccain.com/media/4333/we-are-mccain.jpg"/>
        <meta property="og:url" content="https://www.mccain.com/"/>
        <meta property="og:description" content="McCain Foods | Our purpose - 'Celebrating real connections through delicious, planet-friendly food'. We supply delicious frozen French fries, potato specialties, and appetizers to retail and foodservice customers around the globe.">
        <meta property="og:site_name" content="McCain Foods Global Corporate">
 

    <meta name="author" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1">


    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
    <link href="McCain%20Foods%20Global%20Corporate%20Website%20_%20McCain.com_files/css.css" rel="stylesheet">
    <link href="McCain%20Foods%20Global%20Corporate%20Website%20_%20McCain.com_files/css2.css" rel="stylesheet">    
    <link href="McCain%20Foods%20Global%20Corporate%20Website%20_%20McCain.com_files/css2_002.css" rel="stylesheet">

<link rel="preconnect" href="https://player.vimeo.com/">
<link rel="preconnect" href="https://i.vimeocdn.com/">
<link rel="preconnect" href="https://f.vimeocdn.com/">





    <link href="McCain%20Foods%20Global%20Corporate%20Website%20_%20McCain.com_files/DependencyHandler.css" type="text/css" rel="stylesheet" />

    
<meta name="thumbnail" content="https://www.mccain.com/media/3550/mccain-foods-mccaincom.jpg"/>

  

<style type="text/css">
    nav {
      position: relative;
        display: flex!important;
        justify-content: space-between;
        align-items: center!important;
        background-color: white!important;

    }
    .beyene{
      width: 100vw;
    }
    a{
      text-decoration: none!important;
      color: inherit!important;
    }
    .logo {
      width: fit-content;
    }
    .navbar-toggler{
      float: right;
      margin-inline: 1rem;
    }
    .navbar-collapse ul{
      
      padding-top: 5rem;
    }
    @media (min-width: 700px) {
    .navbar-collapse ul{
      float: right;
      
    }
    a{
      text-decoration: none!important;
      color: inherit!important;
    }
    }
</style>
  <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    
    <link rel="stylesheet" href="./style.css" type="text/css" media="all" />
</head>
<body class="orange-page-load default-device bodyclass">
  <!-- Google Tag Manager (noscript) -->

<!-- End Google Tag Manager (noscript) -->
  <% if (error_msg != "") { %>
    <div class="alert alert-danger"><%= error_msg %></div>
  <% } %>
  <% if (success_msg != "") { %>
    <div class="alert alert-success"><%= success_msg %></div>
  <% } %>  
    
<!-- #wrapper -->
<div id="wrapper">
    <!-- #header -->
<header class="bg-light shadow-sm sticky-top">
      <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container py-3">
          <div class="logo">
              <a href="#">
               <img src="https://www.bhp.com/-/media/project/bhp1ip/bhp1ip-en/bhp-orange.png?iar=0&amp;hash=9467A83EBA5D4819D582B7F0A7E0239B" alt="BHP Home - Logo">
               </a>
              <a class="logo-white-url" href="https://www.bhp.com/" style="display:none;">
            <img src="https://www.bhp.com/-/media/project/bhp1ip/bhp1ip-en/bhpwhite.svg" alt="BHP Home - Logo">
          </a>

            </div>  
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item">
                <a class="nav-link" href="#home">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#about">About Us</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#services">Services</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#applicants">Applicants</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#contact">Contact</a>
              </li>
                 <% if(!isAuthenticated) { %>
                  
                  <li class="nav-item">
                    <a
                      class="nav-link btn btn-outline-primary ms-2"
                      href="#"
                      data-bs-toggle="modal"
                      data-bs-target="#loginModal"
                      >Login</a
                    >
                  </li>
                <% } else { %>
                  <li class="nav-item"> 
                    <form class="nav-link btn btn-outline-primary ms-2" method="post" action="/auth/logout"> <input type="submit" value="logout" class="btn btn-danger"></form>
                <% } %> 
            </ul>
          </div>
        </div>
        
      </nav>
    </header>
    <!-- /#header -->
    <!-- #content -->
    <main>
        <div id="content" class="container">
            <div class="row">
 <%- include("./partials/aboveApplicants.ejs") %>
<!-- Applicants Section -->
    <section id="applicants" class="py-3 bg-light">
      <div class="container">
        <h2 class="section-title text-center">Applicant Status</h2>

        <!-- Accepted Applicants -->
        <div class="mb-5">
          <h3 class="mb-4">
            <button
              class="btn btn-link text-decoration-none text-success p-0 collapseBtn"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#acceptedApplicants"
              aria-expanded="true"
              aria-controls="acceptedApplicants"
            >
              Accepted Applicants <i class="fas fa-chevron-down ms-2"></i>
            </button>
          </h3>
          <div class="collapse show" id="acceptedApplicants">
            <div class="row g-4" id="acceptedApplicantsList"></div>
          </div>
          
        </div>

        <!-- Pending Applicants -->
        <div class="mb-5">
          <h3 class="mb-4">
            <button
              class="btn btn-link text-decoration-none text-secondary p-0 collapseBtn"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#pendingApplicants"
              aria-expanded="true"
              aria-controls="pendingApplicants"
            >
              Pending Applicants <i class="fas fa-chevron-down ms-2"></i>
            </button>
          </h3>
          <div class="collapse show" id="pendingApplicants">
            <div class="row g-4" id="pendingApplicantsList"></div>
          </div>
        </div>

        <!-- Rejected Applicants -->
        <div>
          <h3 class="mb-4">
            <button
              class="btn btn-link text-decoration-none text-danger p-0 collapseBtn"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#rejectedApplicants"
              aria-expanded="true"
              aria-controls="rejectedApplicants"
            >
              Rejected Applicants <i class="fas fa-chevron-down ms-2"></i>
            </button>
          </h3>
          <div class="collapse show" id="rejectedApplicants">
            <div class="row g-4" id="rejectedApplicantsList"></div>
          </div>
        </div>
      </div>
    </section>


    <!-- /#footer -->
</div>
<!-- /#wrapper -->
<% if(isAuthenticated) { %>
    <!-- Floating Action Buttons -->
    <div class="floating-buttons">
      <button
        class="floating-button btn btn-primary"
        data-bs-toggle="modal"
        data-bs-target="#addApplicantModal"
      >
        <i class="fas fa-plus"></i>
      </button>
      <button
        class="floating-button btn btn-secondary"
        data-bs-toggle="modal"
        data-bs-target="#editApplicantModal"
      >
        <i class="fas fa-edit"></i>
      </button>
    </div>
<% } %>
    <!-- Login Modal -->
    <div
      class="modal fade"
      id="loginModal"
      tabindex="-1"
      aria-labelledby="loginModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="loginModalLabel">Login</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form method="post" action="/auth/login">
              <div class="mb-3">
                <label for="loginEmail" class="form-label">Username </label>
                <input
                  name="username"
                  type="text"
                  class="form-control"
                  id="loginEmail"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="loginPassword" class="form-label">Password</label>
                <input
                  name="password"
                  type="password"
                  class="form-control"
                  id="loginPassword"
                  required
                />
              </div>
              <button type="submit" class="btn btn-primary">Login</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Add Applicant Modal -->
    <div
      class="modal fade"
      id="addApplicantModal"
      tabindex="-1"
      aria-labelledby="addApplicantModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addApplicantModalLabel">
              Add New Applicant
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="addApplicantForm" enctype="multipart/form-data">
              <div class="mb-3">
                <label for="newApplicantName" class="form-label">Name</label>
                <input
                  type="text"
                  name="name"
                  class="form-control"
                  id="newApplicantName"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="newApplicantAge" class="form-label">Age</label>
                <input
                  type="number"
                  name="age"
                  class="form-control"
                  id="newApplicantAge"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="newApplicantPhone" class="form-label">Phone</label>
                <input
                  type="text"
                  name="phone"
                  class="form-control"
                  id="newApplicantPhone"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="newApplicantPassport" class="form-label"
                  >Passport Number</label
                >
                <input
                  type="text"
                  name="passportNumber"
                  class="form-control"
                  id="newApplicantPassport"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="newApplicantImage" class="form-label"
                  >Image</label
                >
                <div class="imagesInput">
                <input
                  type="file"
                  name="photo"
                  class="form-control"
                  id="newApplicantImage"
                  accept=".jpeg, .jpg, .png"
                  required
                />
                <img id="userImageOnForm" src="/img/cadana.jpeg" alt="Photo" class=" me-3 cardImg" width="65" height="65">
                </div>
              </div>
              <div class="mb-3">
                <label for="newApplicantStatus" class="form-label"
                  >Status</label
                >
                <select name="status" class="form-select" id="newApplicantStatus" required>
                  <option value="accepted">Accepted</option>
                  <option value="pending">Pending</option>
                  <option value="rejected">Rejected</option>
                </select>
              </div>
              <button type="submit" class="btn btn-success" id="add-applicant-btn">
                Add Applicant
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Edit Applicant Modal -->
    <div
      class="modal fade"
      id="editApplicantModal"
      tabindex="-1"
      aria-labelledby="editApplicantModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editApplicantModalLabel">
              Edit Applicant
            </h5>
            <button
              
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="editApplicantForm" enctype="multipart/form-data">
              <div class="mb-3">
                <label for="editApplicantSelect" class="form-label"
                  >Select Applicant</label
                >
                <select class="form-select" id="editApplicantSelect" required>
                  <!-- Options will be populated dynamically -->
                </select>
              </div>
              <div class="mb-3">
                <label for="editApplicantName" class="form-label">Name</label>
                <input
                  name="name"
                  type="text"
                  class="form-control"
                  id="editApplicantName"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="editApplicantAge" class="form-label">Age</label>
                <input
                  name="age"
                  type="number"
                  class="form-control"
                  id="editApplicantAge"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="editApplicantPhone" class="form-label">Phone</label>
                <input
                  name="phone"
                  type="text"
                  class="form-control"
                  id="editApplicantPhone"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="editApplicantPassport" class="form-label"
                  >Passport Number</label
                >
                <input
                  type="text"
                  name="passportNumber"
                  class="form-control"
                  id="editApplicantPassport"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="editApplicantImage" class="form-label"
                  >Image</label
                >
                <div class="imagesInput">
                <input
                  type="file"
                  name="photo"
                  class="form-control"
                  id="editApplicantImage"
                  accept=".jpeg, .jpg, .png"
                  required
                />
                <img id="updateImage" src="/img/cadana.jpeg" alt="Photo" class=" me-3 cardImg" width="65" height="65">
                </div>
              </div>
              <div class="mb-3">
                <label for="editApplicantStatus" class="form-label"
                  >Status</label
                >
                <select name="status" class="form-select" id="editApplicantStatus" required>
                  <option value="accepted">Accepted</option>
                  <option value="pending">Pending</option>
                  <option value="rejected">Rejected</option>
                </select>
              </div>
              <div class="d-flex justify-content-between mt-2">
                <button type="submit" class="btn btn-success" id="editApplicantBtn">
                  Update Applicant
                </button>
                <button
                  type="button"
                  id="deleteApplicantBtn"
                  class="btn btn-danger"
                  disabled="true"
                >
                  Delete Applicant
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
     <script>
      document.addEventListener("DOMContentLoaded", async function () {
        // slideshow
        
        const dynamicImgInp = document.getElementById("newApplicantImage")
        const dynamicImg = document.getElementById("userImageOnForm")
        const dynamicImgUpdate = document.getElementById("updateImage")
        const dynamicImgInpUpdate = document.getElementById("editApplicantImage")
        
        dynamicImgInp.addEventListener("change", (e) => {
          const oFReader = new FileReader();
        oFReader.readAsDataURL(dynamicImgInp.files[0]);

        oFReader.onload = function (oFREvent) {
            dynamicImg.src = oFREvent.target.result;
        };
        })
         dynamicImgInpUpdate.addEventListener("change", (e) => {
          const oFReader = new FileReader();
        oFReader.readAsDataURL(dynamicImgInpUpdate.files[0]);

        oFReader.onload = function (oFREvent) {
            dynamicImgUpdate.src = oFREvent.target.result;
        };
        })
    

        
        

        // Applicants Section
        
        let applicants = await JSON.parse(`<%-JSON.stringify(clients)%>`)
        const acceptedApplicantsList = document.getElementById(
          "acceptedApplicantsList"
        );
        const pendingApplicantsList = document.getElementById(
          "pendingApplicantsList"
        );
        const rejectedApplicantsList = document.getElementById(
          "rejectedApplicantsList"
        );

       function renderApplicants() {
    acceptedApplicantsList.innerHTML = '';
    pendingApplicantsList.innerHTML = '';
    rejectedApplicantsList.innerHTML = '';

    applicants.forEach((applicant, index) => {
        const applicantCard = `
            <div class="col-md-6 mb-3">
                <div class="card applicant-card h-100" onclick="toggleApplicantDetails(${index})">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between mb-3">
                            <div class="d-flex align-items-center">
                                <img src="${applicant.photo}" alt="${applicant.name}" class="rounded-circle me-3 cardImg" width="65" height="65">
                                <div>
                                    <h5 class="card-title mb-0">${applicant.name}</h5>
                                    <p class="card-text text-${applicant.status === 'accepted' ? 'success' : applicant.status === 'pending' ? 'secondary' : 'danger'} mb-0">
                                        ${applicant.status.charAt(0).toUpperCase() + applicant.status.slice(1)}
                                    </p>
                                </div>
                            </div>
                            <i class="fas fa-chevron-down chevronMan" id="chevron${index}"></i>
                        </div>
                        <div id="applicantDetails${index}" class="applicant-details">
                            <p><strong>Age:</strong> ${applicant.age}</p>
                            <p><strong>Phone:</strong> ${applicant.phone}</p>
                            <p><strong>Passport:</strong> ${applicant.passportNumber}</p>
                        </div>
                    </div>
                </div>
            </div>
        `;

        if (applicant.status === 'accepted') {
            acceptedApplicantsList.innerHTML += applicantCard;
        } else if (applicant.status === 'pending') {
            pendingApplicantsList.innerHTML += applicantCard;
        } else {
            rejectedApplicantsList.innerHTML += applicantCard;
        }
    });

    populateEditApplicantSelect();
}

window.toggleApplicantDetails = function(id) {
    const cardElement = document.querySelector(`.applicant-card:has(#applicantDetails${id})`);
    const detailsElement = document.getElementById(`applicantDetails${id}`);
    const chevronElement = document.getElementById(`chevron${id}`);
    
    cardElement.classList.toggle('active');
    detailsElement.classList.toggle('show');
    chevronElement.classList.toggle('fa-chevron-up');
    chevronElement.classList.toggle('fa-chevron-down');
}

  

        renderApplicants();



        // Add new applicant
        const addApplicantForm = document.getElementById("addApplicantForm");
        addApplicantForm.addEventListener("submit", function (e) {
          e.preventDefault();
          
        const submitBtn = document.getElementById("add-applicant-btn");
        submitBtn.innerText = "Adding Applicant"
        submitBtn.disabled = true
          const newApplicant = new FormData(addApplicantForm)
        console.log(newApplicant)

          // Send POST request to backend
          fetch("/clients", {
            method: "POST",
            body: newApplicant
          })
            .then(response => response.json())
            .then(data => {
              applicants.push(data);
              renderApplicants();
              bootstrap.Modal.getInstance(
                document.getElementById("addApplicantModal")
              ).hide();
              addApplicantForm.reset();
              submitBtn.disabled = false
              submitBtn.innerText = "Add Applicant"
            })
            .catch(error => {
              console.error("Error:", error);
              alert("Failed to add applicant. Please try again.");
            });
        });

        // Populate edit applicant select
        function populateEditApplicantSelect() {
          const editApplicantSelect = document.getElementById(
            "editApplicantSelect"
          );
          editApplicantSelect.innerHTML =
            '<option value="">Select an applicant</option>';
          applicants.forEach(applicant => {
            editApplicantSelect.innerHTML += `<option value="${applicant._id}">${applicant.name}</option>`;
          });
        }
const editBtn = document.getElementById("editApplicantBtn")
        const deleteBtn = document.getElementById("deleteApplicantBtn")
        // Edit applicant
       
        const editApplicantSelect = document.getElementById(
          "editApplicantSelect"
        );
        const deleteApplicantBtn =
          document.getElementById("deleteApplicantBtn");

        editApplicantSelect.addEventListener("change", function () {
          
          const selectedApplicant = applicants.find(
            
            a =>  a._id === this.value
          );
          if (selectedApplicant) {
            document.getElementById("editApplicantName").value =
              selectedApplicant.name;
            document.getElementById("editApplicantAge").value =
              selectedApplicant.age;
            document.getElementById("editApplicantPhone").value =
              selectedApplicant.phone;
            document.getElementById("editApplicantPassport").value = selectedApplicant.passportNumber
            function loadURLToInputFiled(url){
                getImgURL(url, (imgBlob)=> {
                  // Load img blob to input
                  // WIP: UTF8 character error
                  let fileName = selectedApplicant.photo
                  let file = new File([imgBlob], fileName,{type:"image/jpeg", lastModified:new Date().getTime()}, 'utf-8');
                  let container = new DataTransfer(); 
                  container.items.add(file);
                  document.getElementById("editApplicantImage").files = container.files;
                  
                })
            }
            // xmlHTTP return blob respond
              function getImgURL(url, callback){
                var xhr = new XMLHttpRequest();
                xhr.onload = function() {
                    callback(xhr.response);
                };
                xhr.open('GET', url);
                xhr.responseType = 'blob';
                xhr.send();
              }
            loadURLToInputFiled(selectedApplicant.photo)
            document.getElementById("updateImage").src = selectedApplicant.photo;
            document.getElementById("editApplicantStatus").value =
              selectedApplicant.status;
            deleteApplicantBtn.disabled = false;
          } else {
            deleteApplicantBtn.disabled = true;
          }
        });
        
         const editApplicantForm = document.getElementById("editApplicantForm");
        editApplicantForm.addEventListener("submit", function (e) {
          e.preventDefault();
          console.log(e)
          const selectedId = editApplicantSelect.value;
       
             const tmpUpdatedApplicant = {
 
             id: selectedId,
 
             name: document.getElementById("editApplicantName").value,
             age: parseInt(document.getElementById("editApplicantAge").value),
             phone: document.getElementById("editApplicantPhone").value,
             passportNumber: document.getElementById("editApplicantPassport").value,
             status: document.getElementById("editApplicantStatus").value,
             photo: document.getElementById("editApplicantImage").files[0]
           };
          editBtn.innerText = "Updating..."
          editBtn.disabled = true
          deleteBtn.disabled = true
          const updatedApplicant = new FormData(editApplicantForm)
         
          // Send PUT request to backend
          fetch(`/clients/${selectedId}`, {
            method: "PUT",
            body: updatedApplicant
          })
            .then(response => response.json())
            .then(data => {
              console.log(data)
              const applicantIndex = applicants.findIndex(
                a => a._id === selectedId
              );
              if (applicantIndex !== -1) {
                applicants[applicantIndex] = data;
                renderApplicants();
                bootstrap.Modal.getInstance(
                  document.getElementById("editApplicantModal")
                ).hide();
                dynamicImgUpdate.src = ""
                editApplicantForm.reset();
                editBtn.innerText = "Update Applicant"
                editBtn.disabled = false
                deleteBtn.disabled = false
              }
            })
            .catch(error => {
              editBtn.innerText = "Update Applicant"
                
              alert("Failed to update applicant. Please try again.");
            });
        });
        
        // Delete applicant
        deleteApplicantBtn.addEventListener("click", function () {
          
          const selectedId = editApplicantSelect.value;
          if (confirm("Are you sure you want to delete this applicant?")) {
            deleteBtn.innerText = "Deleting..."
            deleteBtn.disabled = true
            editBtn.disabled = true
            // Send DELETE request to backend
            fetch(`/clients/${selectedId}`, {
              method: "DELETE"
            })
              .then(response => {
                console.log(response.ok)
                if (response.ok) {
                  applicants = applicants.filter(a => a._id !== selectedId);
                  renderApplicants();
                  
                  bootstrap.Modal.getInstance(
                    document.getElementById("editApplicantModal")
                  ).hide();
                  editApplicantForm.reset();
                  deleteBtn.innerText = "Delete Applicant"
                  deleteBtn.disabled = false
                  editBtn.disabled = false
                } else {
                  throw new Error("Failed to delete applicant");
                }
              })
              .catch(error => {
                console.error("Error:", error);
                alert("Failed to delete applicant. Please try again.");
              });
          }
        });

        // Initial render
        renderApplicants();
      });
    </script>
  </body> 

</html>
